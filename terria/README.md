# DE Africa Terria catalogue

The Terria catalogue is a list of all datasets available to users on the Digital Earth Africa Map https://maps.digitalearth.africa/ when they select "Explore map data". It is built from the `africa-prod.json` file.

## `africa-prod.json`

The Terria catalogue is generated as a `wms-group` based on the structure of `../services/ows_refactored/prod_af_ows_root_cfg.py`. 
Any product added to that root config file and released in a tagged version (i.e. in live production) will be visible to users of the Map portal. 

The catalogue will use the layer `title` and `abstract` as defined in the individual layer configs. Therefore, any changes to layer titles or text need to be made in their respective layer config file (generally found in subfolders of `../services/ows_refactored/`).

## Exclude layers 

Exclude layers from the Map portal Terria catalogue by adding the name of the layer to the `excludeMembers` list. An example of `excludeMembers` in use can be viewed in [this file](https://github.com/GeoscienceAustralia/dea-config/blob/master/dev/terria/terria-cube-v8.json).

## Are tagged versions required to see changes to `africa-prod.json`?

No. Changes to the `africa-prod.json` file itself do not require a tagged version to go live; for example adding or removing items from `excludeMembers`. Caution: changing the `wms-group` name is not recommended as it may cause all exisiting sharelinks to break.

However, any changes to files it builds from (such as the `prod_af_ows_root_cfg.py` file, or any layer definition in the `ows_refactored` folder) **do** require tagged releases to move from unstable prod to live prod.

## Superseded - `africa-prod-archived.json`

*Not currently in use*

The pre-2022 manually-defined Terria catalogue, used in repository release `0.1.42` and earlier. It does not draw information from layer configs (for example `abstract` fields are missing and would have to be individually copied over and updated). It has not been updated with products past January 2022.

## Hybrid catalogue

*Not currently implemented*

It is possible to create hybrid manual-autogenerated Terria catalogues by nesting one or more `wms-group`s inside a manually-defined block structure. This structure could be used in the case where most layers do not need major customisation but some do. See the DE Australia dev Terria config for an [example](https://github.com/GeoscienceAustralia/dea-config/blob/master/dev/terria/terria-cube-v8.json) (search "wms-group").